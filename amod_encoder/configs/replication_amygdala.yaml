# =============================================================================
# REPLICATION CONFIG — whole amygdala  (Jang & Kragel 2024, Figure 3a/3c/4)
# Mirrors: develop_encoding_models_amygdala.m  +  compile_matrices.m
#          make_parametric_map_amygdala.m  +  perform_ttest_IAPS_OASIS_amygdala.m
#
# Run order:
#   1.  amod-encoder fit      -c configs/replication_amygdala.yaml
#   2.  amod-encoder eval     -c configs/replication_amygdala.yaml
#   3.  amod-encoder predict-iaps-oasis  -c configs/replication_amygdala.yaml
#   4.  amod-encoder export-betas        -c configs/replication_amygdala.yaml
#
# Data you need before running (see data/README.md):
#   ds002837       → data\NNDb_ds002837\      (~132 GB, OpenNeuro ds002837 v2.0.0)
#   fc7 .mat       → data\features\500_days_of_summer_fc7_features.mat  (OSF r48gc)
#   amygdala mask  → data\masks\canlab2018\canlab2018_amygdala_combined.nii.gz
#   IAPS CSV       → data\ratings\IAPS_data_amygdala_z.csv             (OSF r48gc)
#   OASIS CSV      → data\ratings\OASIS_data_amygdala_z.csv            (OSF r48gc)
# =============================================================================

paths:
  bids_root:    data\NNDb_ds002837
  osf_fc7_mat:  data\features\500_days_of_summer_fc7_features.mat
  output_dir:   results\amygdala
  iaps_csv:     data\ratings\IAPS_data_amygdala_z.csv
  oasis_csv:    data\ratings\OASIS_data_amygdala_z.csv

subjects:
  - "1"
  - "2"
  - "3"
  - "4"
  - "5"
  - "6"
  - "7"
  - "8"
  - "9"
  - "10"
  - "11"
  - "12"
  - "13"
  - "14"
  - "15"
  - "16"
  - "17"
  - "18"
  - "19"
  - "20"

roi:
  - name: amygdala
    mask_path: data\masks\canlab2018\canlab2018_amygdala_combined.nii.gz
    atlas: canlab2018

features:
  type: fc7
  n_features: 4096
  frame_sampling: 5                   # MATLAB: every 5th frame
  align_method: resample_poly         # MATLAB: resample()
  zscore: false                       # MATLAB does NOT zscore before PLS
  convolution_order: resample_then_convolve  # MATLAB amygdala order

hrf:
  model: spm_canonical                # MATLAB: spm_hrf(1)
  dt: 1.0

model:
  type: pls
  pls_n_components: 20                # MATLAB: ncomp = 20
  standardize_X: false                # MATLAB plsregress centres but does not scale
  standardize_Y: false
  mode: voxelwise

cv:
  scheme: kfold                       # MATLAB: crossvalind('k', N, 5)
  n_folds: 5
  seed: 42

# GPU enabled — RTX 5070 Ti (sm_120)
compute:
  backend: torch
  device: cuda
  amp: false
