# =============================================================================
# CLUSTER CONFIG — amygdala subregions, Midway3 hcn1 (4× L40S)
# All paths relative to amod_encoder/ (submit.sh cd's there).
# =============================================================================

paths:
  bids_root:   data/NNDb_ds002837
  osf_fc7_mat: data/features/500_days_of_summer_fc7_features.mat
  output_dir:  ../results/subregions

subjects:
  - "1"
  - "2"
  - "3"
  - "4"
  - "5"
  - "6"
  - "7"
  - "8"
  - "9"
  - "10"
  - "11"
  - "12"
  - "13"
  - "14"
  - "15"
  - "16"
  - "17"
  - "18"
  - "19"
  - "20"

roi:
  - name: CM
    mask_path: data/masks/canlab2018/canlab2018_amygdala_CM.nii.gz
    atlas: canlab2018
  - name: SF
    mask_path: data/masks/canlab2018/canlab2018_amygdala_SF.nii.gz
    atlas: canlab2018
  - name: AStr
    mask_path: data/masks/canlab2018/canlab2018_amygdala_AStr.nii.gz
    atlas: canlab2018
  - name: LB
    mask_path: data/masks/canlab2018/canlab2018_amygdala_LB.nii.gz
    atlas: canlab2018

features:
  type: fc7
  n_features: 4096
  frame_sampling: 5
  align_method: resample_poly
  zscore: false
  convolution_order: convolve_then_resample  # subregions order

hrf:
  model: spm_canonical
  dt: 1.0

model:
  type: pls
  pls_n_components: 20
  standardize_X: false
  standardize_Y: false
  mode: voxelwise

cv:
  scheme: kfold
  n_folds: 5
  seed: 42

compute:
  backend: torch
  device: cuda
  amp: false
  n_workers: 20
  gpu_ids: [0, 1, 2, 3]
  pin_memory: true
